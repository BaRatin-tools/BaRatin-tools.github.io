<!DOCTYPE html>
<html lang="en">

  <head>
    
	    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],  
      inlineMath: [['\\(', '\\)'], ['$', '$']]                  
    }
  };
</script>



    

    <meta charset="utf-8">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Hydraulic controls</title>
<meta name="author" content="" />





<meta name="description" content="">

<meta name="generator" content="Hugo 0.122.0">


<link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>


<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.11.2/css/all.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link href="/css/animate.css" rel="stylesheet">



  <link href="/css/style.blue.css" rel="stylesheet" id="theme-stylesheet">



<link href="/css/custom.css?1709048732" rel="stylesheet">



  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->



<link rel="shortcut icon" href="/img/logo.png" type="image/x-icon" />
<link rel="apple-touch-icon" href="/img/logo.png" />


<link rel="alternate" href="https://baratin-tools.github.io/index.xml" type="application/rss+xml" title="BaRatin - Bayesian Rating Curves">








<meta property="og:locale" content="en">
<meta property="og:site_name" content="BaRatin - Bayesian Rating Curves">
<meta property="og:title" content="Hydraulic controls">
<meta property="og:type" content="website">
<meta property="og:url" content="https://baratin-tools.github.io/en/doc/topics/hydraulic-controls/" />
<meta property="og:description" content="">
<meta property="og:image" content="https://baratin-tools.github.io/img/logo.png">
<meta property="og:image:type" content="image/png">



  <meta property="og:image:width" content="145">
  <meta property="og:image:height" content="145">






<meta name="twitter:card" content="summary">

<meta name="twitter:title" content="Hydraulic controls">

<meta name="twitter:image" content="https://baratin-tools.github.io/img/logo.png">

<meta name="twitter:description" content="">


  </head>

  <body>

    <div id="all">

        


        <header class="navbar-affixed-top" data-spy="affix" data-offset-top="62">
    <div class="navbar navbar-default yamm " role="navigation" id="navbar">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/en/">
                    
                      <img src="/img/logoWithText.png" alt="Hydraulic controls logo" class="hidden-xs hidden-sm" />
                      <img src="/img/logo.png" alt="Hydraulic controls logo" class="visible-xs visible-sm" />
                    
                    <span class="sr-only">Hydraulic controls - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  

                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/en">Home</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                    
                    
                    <li class="dropdown ">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Documentation <span class="caret"></span></a>
                        
                        <ul class="dropdown-menu">
                            
                            <li><a href="/en/doc/baratinage">BaRatinAGE</a></li>
                            
                            <li><a href="/en/doc/topics">Topic sheets</a></li>
                            
                            <li><a href="/en/doc/case">Case Studies</a></li>
                            
                        </ul>
                        
                    </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/en/resources">Resources</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/en/blog">Blog</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/en/about">About</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/en/index.xml">rss</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/fr">🇫🇷 fr</a>
                  </li>
                  
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
                    </div>
                </form>
            </div>
            
        </div>
    </div>
</header>




        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Hydraulic controls</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">

                    

                    <div class="col-md-10" id="blog-post">

                        <div id="post-content">
                          

<div id="TOC">
<ul>
<li><a href="#controls" id="toc-controls"><span class="toc-section-number">1</span> Controls</a>
<ul>
<li><a href="#the-basic-equation" id="toc-the-basic-equation"><span class="toc-section-number">1.1</span> The basic equation</a></li>
<li><a href="#section-controls-and-channel-controls" id="toc-section-controls-and-channel-controls"><span class="toc-section-number">1.2</span> Section controls and channel controls</a></li>
</ul></li>
<li><a href="#equations-of-the-standard-controls" id="toc-equations-of-the-standard-controls"><span class="toc-section-number">2</span> Equations of the standard controls</a>
<ul>
<li><a href="#rectangular-weir" id="toc-rectangular-weir"><span class="toc-section-number">2.1</span> Rectangular weir</a></li>
<li><a href="#parabolic-weir" id="toc-parabolic-weir"><span class="toc-section-number">2.2</span> Parabolic weir</a></li>
<li><a href="#triangular-weir" id="toc-triangular-weir"><span class="toc-section-number">2.3</span> Triangular weir</a></li>
<li><a href="#free-flowing-orifice" id="toc-free-flowing-orifice"><span class="toc-section-number">2.4</span> Free-flowing orifice</a></li>
<li><a href="#rectangular-channel-wide" id="toc-rectangular-channel-wide"><span class="toc-section-number">2.5</span> Rectangular channel (wide)</a></li>
<li><a href="#parabolic-channel-wide" id="toc-parabolic-channel-wide"><span class="toc-section-number">2.6</span> Parabolic channel (wide)</a></li>
<li><a href="#triangular-channel" id="toc-triangular-channel"><span class="toc-section-number">2.7</span> Triangular channel</a></li>
<li><a href="#other-types-of-controls" id="toc-other-types-of-controls"><span class="toc-section-number">2.8</span> Other types of controls</a></li>
</ul></li>
<li><a href="#prior-specification" id="toc-prior-specification"><span class="toc-section-number">3</span> Prior specification</a>
<ul>
<li><a href="#determination-of-prior-parameters" id="toc-determination-of-prior-parameters"><span class="toc-section-number">3.1</span> Determination of prior parameters</a></li>
<li><a href="#approximation-of-actual-complex-controls" id="toc-approximation-of-actual-complex-controls"><span class="toc-section-number">3.2</span> Approximation of actual, complex controls</a></li>
<li><a href="#remarks" id="toc-remarks"><span class="toc-section-number">3.3</span> Remarks</a></li>
</ul></li>
</ul>
</div>

<div id="controls" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Controls</h1>
<div id="the-basic-equation" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> The basic equation</h2>
<p>For all the standard controls used in BaRatinAGE, the stage-discharge relation is described by a power function which is active above a given stage. The basic equation is as follows:</p>
<p><span class="math display">\[ Q(H) =
\begin{cases}
0 \text{ si } H \leq b \text{ ou } h \leq \kappa \\
a(H-b)^c \text { sinon}
\end{cases}
\]</span></p>
<ul>
<li><span class="math inline">\(Q\)</span> is the discharge and <span class="math inline">\(H\)</span> is the stage;</li>
<li><span class="math inline">\(\kappa\)</span> is the <em>activation stage</em>; when the water level falls below <span class="math inline">\(\kappa\)</span>, the control becomes inactive;</li>
<li><span class="math inline">\(a\)</span> is the <em>coefficient</em>, which depends on the physical properties of the control;</li>
<li><span class="math inline">\(c\)</span> is the <em>exposant</em>, which depends on the type of control;</li>
<li><span class="math inline">\(b\)</span> is the <em>offset</em>; when the water level falls below the value <span class="math inline">\(b\)</span>, the flow is zero.</li>
</ul>
<p>Note that the offset is generally different from the activation stage <span class="math inline">\(\kappa\)</span>. For example, for a channel control that follows a weir control, the parameter <span class="math inline">\(b\)</span> represents the average elevation of the bottom of the bed, but the control will only be active for a water level above which the weir is flooded, which is physically different from <span class="math inline">\(b\)</span>.</p>
</div>
<div id="section-controls-and-channel-controls" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Section controls and channel controls</h2>
<p>For section controls, the stage-discharge relation at the measurement cross-section is determined by a downstream cross-section where the flow is critical (Froude number is equal to 1). Applying the Bernoulli principle (energy conservation) between these two cross-sections leads to the followinf equation:</p>
<p><span class="math display">\[Q(H) = CA_w\sqrt{2gD_h}\]</span></p>
<p>where <span class="math inline">\(C\)</span> is a discharge coefficient accounting for the head losses between the measurement cross-section (upstream) and the critical cross-section (downstream) and depending on the cross-section shape, <span class="math inline">\(A_w\)</span> is the wetted area (<span class="math inline">\(m^2\)</span>), <span class="math inline">\(g\)</span> is the gravity
acceleration (<span class="math inline">\(g \approx 9.81 m.s^{-2}\)</span>) and <span class="math inline">\(D_h=A_w/B_w\)</span> is the hydraulic depth (<span class="math inline">\(m\)</span>), defined as the ratio between the wetted area <span class="math inline">\(A_w\)</span> and the width <span class="math inline">\(B_w\)</span>.</p>
<p>For channel controls, i.e. when the stage-discharge relation is determined by friction, equation 1 is established from the Manning-Strickler equation applied to the given geometry of the channel. The Manning-Strickler equation is:</p>
<p><span class="math display">\[Q(H) = K_S A_w R_h^{2/3} \sqrt{S_f}\]</span></p>
<p>where <span class="math inline">\(K_S\)</span> = flow resistance coefficient (Strickler coefficient in <span class="math inline">\(m^{1/3}.s^{-1}\)</span>) ; Manning coefficient <span class="math inline">\(n = 1 / K_S\)</span> (<span class="math inline">\(m^{-1/3}.s\)</span>) can be used instead. <span class="math inline">\(A_w\)</span> = wetted area (<span class="math inline">\(m^2\)</span>), <span class="math inline">\(R_h=A_w/P_w\)</span> = hydraulic radius (<span class="math inline">\(m\)</span>), <span class="math inline">\(P_w\)</span> = wetted perimeter (<span class="math inline">\(m\)</span>), <span class="math inline">\(S_f\)</span> = head line slope (or friction slope), approximated by the longitudinal slope of the bed or of the water profile for steady uniform flows.</p>
</div>
</div>
<div id="equations-of-the-standard-controls" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Equations of the standard controls</h1>
<div id="rectangular-weir" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Rectangular weir</h2>
<img src="rectangular_weir.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 1: Rectangular weir: longitudinal view (left) and front view of control cross-section (right).
</p>
<p>The equation of this type of control is:</p>
<p><span class="math display">\[Q(H) = C_r \sqrt{2g} B_w (H-b)^c \]</span></p>
<p>For each control modelled as a rectangular weir, priors must be assigned for the following parameters:</p>
<ul>
<li><span class="math inline">\(\kappa\)</span> = the water level (in <span class="math inline">\(m\)</span>) above which the control becomes active; when the control is the first, or when the control adds to existing controls, this activation stage is equal to the weir crest elevation <span class="math inline">\(b\)</span>;</li>
<li><span class="math inline">\(B_w\)</span> = the spillway width (in <span class="math inline">\(m\)</span>), i.e. the transverse length of the weir, normal to the flow direction.</li>
</ul>
<p>Default priors are already specified for the other parameters:</p>
<ul>
<li><span class="math inline">\(C_r\)</span> = discharge coefficient <span class="math inline">\(\approx 0.4 ± 0.1\)</span></li>
<li><span class="math inline">\(g\)</span> = gravitational acceleration <span class="math inline">\(\approx 9.81 ± 0.01 m.s^{-2}\)</span></li>
<li><span class="math inline">\(c\)</span> = exponent for a rectangular critical cross-section <span class="math inline">\(\approx 1.5 ± 0.05\)</span></li>
</ul>
</div>
<div id="parabolic-weir" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Parabolic weir</h2>
<img src="parabolic_weir.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 2. Parabolic weir: longitudinal view (left) and front view of control cross-section (right).
</p>
<p>Re-arranging the results of <a href="https://doi.org/10.1016/j.biosystemseng.2006.09.006">Igathinathane et al. (2007)</a>, the equation of this type of control is:</p>
<p><span class="math display">\[Q(H) = C_p \sqrt{2g} \frac{B_p}{\sqrt{H_p}} (H-b)^c \]</span></p>
<p>For each control modelled as a parabolic weir, priors must be assigned for the following parameters:</p>
<ul>
<li><span class="math inline">\(\kappa\)</span> = the water level (in <span class="math inline">\(m\)</span>)above which the control becomes active; when the control is the first, or when the control adds to existing controls, this activation stage is equal to the weir crest elevation <span class="math inline">\(b\)</span> at the centre of the parabola;</li>
<li><span class="math inline">\(B_p\)</span> et <span class="math inline">\(H_p\)</span> = the width and height (in <span class="math inline">\(m\)</span>), of the parabola, respectively, measured at the same given elevation (e.g. the bankful stage).</li>
</ul>
<p>Default priors are already specified for the other parameters:</p>
<ul>
<li><span class="math inline">\(C_p\)</span> = discharge coefficient <span class="math inline">\(\approx 0.22 ± 0.04\)</span> (<a href="https://doi.org/10.1016/j.biosystemseng.2006.09.006">Igathinathane et al. 2007</a>)</li>
<li><span class="math inline">\(g\)</span> = gravitational acceleration <span class="math inline">\(\approx 9.81 ± 0.01 m.s^{-2}\)</span></li>
<li><span class="math inline">\(c\)</span> = exponent for a parabolic critical cross-section <span class="math inline">\(\approx 2.0 ± 0.05\)</span></li>
</ul>
<p>Note: The discharge coefficient seems to be larger than 0.22 for wider parabolic weirs: according to <a href="https://doi.org/10.1016/j.biosystemseng.2006.09.006">Igathinathane et al. (2007)</a>, <span class="math inline">\(C_p \approx 0.25\)</span> for <span class="math inline">\(B_p=2H_p\)</span>. There is no precise information on very wide
parabolic weirs and on broad-crested parabolic weirs.</p>
</div>
<div id="triangular-weir" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Triangular weir</h2>
<img src="triangular_weir.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 3: Triangular weir: longitudinal view (left) and front view of control cross-section
(right).
</p>
<p>The equation of this type of control is:
<span class="math display">\[Q(H) = C_t \sqrt{2g} \tan(\nu/2) (H-b)^c \]</span></p>
<p>For each control modelled as a triangular weir, priors must be assigned for the following parameters:</p>
<ul>
<li><span class="math inline">\(\kappa\)</span> = the water level (in <span class="math inline">\(m\)</span>) above which the control becomes active; when the control is the first, or when the control adds to existing controls, this activation stage is equal to the elevation of the triangle vertex <span class="math inline">\(b\)</span>;</li>
<li><span class="math inline">\(\nu\)</span> = the triangle opening angle (in degrees).</li>
</ul>
<p>Default priors are already specified for the other parameters:</p>
<ul>
<li><span class="math inline">\(C_t\)</span> = discharge coefficient <span class="math inline">\(\approx 0.31 ± 0.05\)</span></li>
<li><span class="math inline">\(g\)</span> = gravitational acceleration <span class="math inline">\(\approx 9.81 ± 0.01 m.s^{-2}\)</span></li>
<li><span class="math inline">\(c\)</span> = exponent for a triangular critical cross-section <span class="math inline">\(\approx 2.5 ± 0.05\)</span></li>
</ul>
</div>
<div id="free-flowing-orifice" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Free-flowing orifice</h2>
<img src="orifice.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 4: Free-flowing orifice: longitudinal view (left) and front view of the control cross-section (right).
</p>
<p>The equation of this type of control is:
<span class="math display">\[Q(H) = C_o \sqrt{2g} A_w (H-b)^c \]</span></p>
<p>For each control modelled as a free-flowing orifice (flow fills the orifice but there is a free fall at the outlet, with no influence of the downstream stage on the stage-discharge relation, see Figure 4), priors must be assigned for the following parameters:</p>
<ul>
<li><span class="math inline">\(\kappa\)</span> = the water level (in <span class="math inline">\(m\)</span>) above which the control becomes active;</li>
<li><span class="math inline">\(A_w\)</span> = the cross-sectional area (en <span class="math inline">\(m²\)</span>) of the orifice.</li>
</ul>
<p>Default priors are already specified for the other parameters:</p>
<ul>
<li><span class="math inline">\(C_o\)</span> = discharge coefficient <span class="math inline">\(\approx 0.6 ± 0.1\)</span></li>
<li><span class="math inline">\(g\)</span> = gravitational acceleration <span class="math inline">\(\approx 9.81 ± 0.01 m.s^{-2}\)</span></li>
<li><span class="math inline">\(c\)</span> = exponent for a free-flowing orifice <span class="math inline">\(\approx 0.5 ± 0.05\)</span></li>
</ul>
<p>Note. The hydraulic structure featuring the orifice may produce a backwater that influences the water level before the hole is completely filled and that the previous equation to apply. Hydraulic modelling can then be used to represent this transition phase and this specific backwater effect.</p>
</div>
<div id="rectangular-channel-wide" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Rectangular channel (wide)</h2>
<img src="rectangular_channel.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 5: Wide rectangular channel: longitudinal view (left) and cross-section at the staff gauge (right).
</p>
<p>The Manning-Strickler equation is applied to a wide rectangular channel, i.e. <span class="math inline">\(H-b \ll B_w\)</span> (typically <span class="math inline">\(5(H-b) &lt; B_w\)</span>).</p>
<p>The equation of this type of control is:</p>
<p><span class="math display">\[Q(H) = K_S \sqrt{S} B_w (H-b)^c \]</span></p>
<p>For each control modelled as a wide rectangular channel control, priors must be assigned for the following parameters:</p>
<ul>
<li><span class="math inline">\(\kappa\)</span> = the water level (in <span class="math inline">\(m\)</span>) above which the control becomes active; when the control is the first, or when the control adds to existing controls this activation stage is equal to the mean bed elevation <span class="math inline">\(b\)</span> at the gauge;</li>
<li><span class="math inline">\(B_w\)</span> = the width (in <span class="math inline">\(m\)</span>) of the rectangular channel;</li>
<li><span class="math inline">\(S\)</span> = the longitudinal slope of the river channel (dimensionless, e.g. write 0.01 for a 1% slope, etc.);</li>
<li><span class="math inline">\(K_S\)</span> = the flow resistance parameter (Strickler coefficient in <span class="math inline">\(m^{1/3}.s^{-1}\)</span>);</li>
<li>The Manning coefficient <span class="math inline">\(n=1/K_S\)</span> (<span class="math inline">\(m^{-1/3}.s\)</span>) can be used instead.</li>
</ul>
<p>Default priors are already specified for the remaining parameter:</p>
<ul>
<li><span class="math inline">\(c\)</span> = exponent for a wide rectangular channel control <span class="math inline">\(\approx 1.67 ± 0.05\)</span></li>
</ul>
</div>
<div id="parabolic-channel-wide" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Parabolic channel (wide)</h2>
<img src="parabolic_channel.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 6: Wide parabolic channel: longitudinal view (left) and cross-section at the staff gauge (right).
</p>
<p>The Manning-Strickler equation is applied to a wide parabolic channel, i.e.
<span class="math display">\[H-b \ll \frac{3}{8}\frac{B_p^2}{H_p}\]</span></p>
<p>Typically, the condition is:</p>
<p><span class="math display">\[5(H-b) &lt; \frac{3}{8}\frac{B_p^2}{H_p}\]</span></p>
<p>The equation of this type of control is:</p>
<p><span class="math display">\[Q(H) = K_S \sqrt{S} \left( \frac{2}{3} \right)^{5/3}\frac{B_p}{H_p} (H-b)^c \]</span></p>
<p>For each control modelled as a wide parabolic channel control, priors must be assigned for the following parameters:</p>
<ul>
<li><span class="math inline">\(\kappa\)</span> = the water level (in <span class="math inline">\(m\)</span>) above which the control becomes active; when the control is the first, or when the control adds to existing controls this activation stage is equal to the mean thalweg elevation <span class="math inline">\(b\)</span> at the gauge;</li>
<li><span class="math inline">\(B_p\)</span> and <span class="math inline">\(H_p\)</span> = the width and height (in <span class="math inline">\(m\)</span>) of the parabola, respectively, measured at the same given elevation (e.g. the bankful stage);</li>
<li><span class="math inline">\(S\)</span> = the longitudinal slope of the river channel (dimensionless, e.g. write 0.01 for a 1% slope, etc.);</li>
<li><span class="math inline">\(K_S\)</span> = the flow resistance parameter (Strickler coefficient in <span class="math inline">\(m^{1/3}.s^{-1}\)</span>)</li>
<li>Manning’s <span class="math inline">\(n=1/K_S\)</span> (<span class="math inline">\(m^{-1/3}.s\)</span>) can be used instead.</li>
</ul>
<p>Default priors are already specified for the remaining parameter:</p>
<ul>
<li><span class="math inline">\(c\)</span> = exponent for a wide parabolic channel control <span class="math inline">\(\approx 2.17 ± 0.05\)</span></li>
</ul>
</div>
<div id="triangular-channel" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Triangular channel</h2>
<img src="triangular_channel.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 7: Triangular channel: longitudinal view (left) and cross-section at the staff gauge (right).
</p>
<p>The Manning-Strickler equation is applied to a triangular channel. The equation of this type of control is:</p>
<p><span class="math display">\[Q(H) = K_S \sqrt{S} \tan(\nu/2) \left( \frac{\sin(\nu/2)}{2} \right)^{2/3} (H-b)^c \]</span></p>
<p>For each control modelled as a triangular channel control, priors must be assigned for the following parameters:</p>
<ul>
<li><span class="math inline">\(\kappa\)</span> = the water level (in <span class="math inline">\(m\)</span>) above which the control becomes active; when the control is the first, or when the control adds to existing controls this activation stage is equal to the mean thalweg elevation <span class="math inline">\(b\)</span> at the gauge;</li>
<li><span class="math inline">\(\nu\)</span> = the triangle opening angle (in degrees);</li>
<li><span class="math inline">\(S\)</span> = the longitudinal slope of the river channel (dimensionless, e.g. write 0.01 for a 1% slope,etc.);</li>
<li><span class="math inline">\(K_S\)</span> = the flow resistance parameter (Strickler coefficient in <span class="math inline">\(m^{1/3}.s^{-1}\)</span>)</li>
<li>Manning’s <span class="math inline">\(n=1/K_S\)</span> (<span class="math inline">\(m^{-1/3}.s\)</span>) can be used instead.</li>
</ul>
<p>Default priors are already specified for the remaining parameter:</p>
<ul>
<li><span class="math inline">\(c\)</span> = exponent for a triangular channel control <span class="math inline">\(\approx 2.67 ± 0.05\)</span></li>
</ul>
</div>
<div id="other-types-of-controls" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Other types of controls</h2>
<p>Experience shows that with the small number of standard controls presented so far, many situations encountered in practice can be described. The key is to combine these standard controls (by making them succeed or add to each other) to best describe the actual hydraulic configuration.</p>
<p>Nevertheless, there are some controls that cannot be modelled trivially by combining the standard controls. Figure 8 shows an example: a triangular weir which laterally expands up to a given stage, then is framed with vertical walls. The best way to model such a section control would be consider the excess wetted area by removing a second triangular weir equation from the first triangular weir equation.</p>
<p>The equation of this type of control (`truncated triangle’) would be:</p>
<p><span class="math display">\[ Q(H) = C_t \sqrt{2g} \tan(\nu/2) (H-b)^c - C_t \sqrt{2g} \tan(\nu/2) (H-b&#39;)^c \]</span></p>
<p>for <span class="math inline">\(H&gt;b&#39;\)</span> with <span class="math inline">\(b&#39;\)</span> = the water level at which the triangle meets the vertical walls. However, this is not possible with BaRatinAGE since negative coefficients are not allowed.</p>
<p>A practical way to model this type of configuration is to combine a triangular section control for low stages and a rectangular section control for high stages. For intermediate stages, a fair transition between triangle and rectangle approximations can be computed using a parabolic section control of intermediate offset and suitable height and width.</p>
<img src="Charbo_weir.svg" width="100%">
<p style="text-align: center;color: gray;">
Figure 8: Triangular weir framed with vertical walls: longitudinal view (left) and front view of control cross-section (right).
</p>
</div>
</div>
<div id="prior-specification" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Prior specification</h1>
<div id="determination-of-prior-parameters" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Determination of prior parameters</h2>
<p>The hydraulic analysis (matrix of controls) induced the mathematical model of the rating curve by combining the equations of the standard controls (for more details on the rating curve equation, see <a href="/en/doc/topics/rating-curve/">this page</a>).</p>
<p>At this stage of the method the objective is to give plausible values to the different parameters of this model. The Bayesian inference, i.e. the basis of the method, requires assigning a central value and a non-zero uncertainty to each parameter. This is what we call prior parameters (see this page: <a href="/en/doc/topics/bayesian/">Bayesian basics</a>).</p>
<p>Therefore, prior parameters <span class="math inline">\(\kappa\)</span>, <span class="math inline">\(a\)</span> and <span class="math inline">\(c\)</span> must be specified for every control. However, it is not necessary to specify a prior parameter <span class="math inline">\(b\)</span>: the discharge continuity of the rating curve is a constraint which implies that the parameter <span class="math inline">\(b\)</span> is automatically inferred from the other three parameters.</p>
<p>In BaRatinAGE, priors consist of a value and a “±” uncertainty expressed in the same unit as the parameter to which it is assigned. This expanded uncertainty is equal to twice the standard-uncertainty (standard-deviation). The underlying assumption is that the prior uncertainty of the true value of the parameter follows a Gaussian distribution.</p>
<p>Notes:</p>
<ul>
<li>The prior values must be estimated with care by the user but <strong>without ever using the gaugings</strong>. If however one or more gaugings are used to estimate the priors, they must be removed from the dataset that will be used by BaRatin to compute the rating curve.</li>
<li>It is rarely necessary to use gaugings to estimate the priors since the parameters of the standard controls equations are relatively easy to determine physical parameters as discussed in the examples.</li>
</ul>
<p>BaRatinAGE offers help in the prior setting of the equations of each of the standard controls presented above. In these formulas, the coefficient <span class="math inline">\(a\)</span> of the basic equation <span class="math inline">\(a(H-b)^c\)</span> is a function of several physical parameters, of which the user must specify a central value and an uncertainty, i.e. the mean and twice the standard deviation of the underlying Gaussian distribution.</p>
<p>BaRatinAGE then calculates the central value of the coefficient <span class="math inline">\(a\)</span> and its uncertainty, by the method of propagation of uncertainty given by the GUM (<a href="https://www.iso.org/sites/JCGM/GUM/JCGM100/C045315e-html/C045315e.html?csnumber=50461">JCGM, 2008</a>), based on a first order Taylor series expansion. The formulas implemented for the various standard-controls are detailed in the sections below. Remember that the standard uncertainties, <span class="math inline">\(u\)</span>, are half of expanded uncertainties visible in the BaRatinAGE interface.</p>
<p><strong>General propagation formula</strong></p>
<p><span class="math display">\[
\begin{align}
a = &amp; f(x_1,\ldots,x_p) \\
u^2(a) = &amp; \sum_{i=1}^p \left( \frac{\partial f(x_1,\ldots,x_p)}{\partial x_i} \right)^2 u^2(x_i)
\end{align}
\]</span>
<strong>Rectangular weir</strong></p>
<p><span class="math display">\[
\begin{align}
a= &amp; C_r \sqrt{2g} B_w  \\
u^2(a) = &amp; \left( \sqrt{2g} B_w \right)^2 u^2(C_r) +
\left(\frac{C_r B_w}{\sqrt{2g}}  \right)^2 u^2(g)+
\left( C_r \sqrt{2g} \right)^2 u^2(B_w)
\end{align}
\]</span>
<strong>Parabolic weir</strong></p>
<p><span class="math display">\[
\begin{align}
a = &amp; C_p \sqrt{2g} \frac{B_p}{\sqrt{H_p}}  \\
u^2(a) = &amp; \left(\sqrt{2g} \frac{B_p}{\sqrt{H_p}} \right)^2 u^2(C_p)+
\left( C_p  \frac{B_p}{\sqrt{2g}\sqrt{H_p}} \right)^2 u^2(g)+
\left( \frac{C_p \sqrt{2g}}{\sqrt{H_p}} \right)^2 u^2(B_p)+
\left( C_p \sqrt{2g} \frac{B_p}{2H_p^{3/2}} \right)^2 u^2(H_p)
\end{align}
\]</span></p>
<p><strong>Triangular weir</strong></p>
<p><span class="math display">\[
\begin{align}
a = &amp; C_t \sqrt{2g} \tan(\nu/2)  \\
u^2(a) = &amp; \left( \sqrt{2g} \tan(\nu/2) \right)^2 u^2(C_t)+
\left( \frac{C_t \tan(\nu/2)}{\sqrt{2g}} \right)^2 u^2(g)+
\left( \frac{C_t \sqrt{2g}}{2\cos^2(\nu/2)} \right)^2 u^2(\nu)
\end{align}
\]</span>
<strong>Free-flowing orifice</strong></p>
<p><span class="math display">\[
\begin{align}
a = &amp; C_o \sqrt{2g} A_w  \\
u^2(a) = &amp; \left( \sqrt{2g} A_w \right)^2 u^2(C_o) +
\left(\frac{C_o A_w}{\sqrt{2g}}  \right)^2 u^2(g)+
\left( C_o \sqrt{2g} \right)^2 u^2(A_w)
\end{align}
\]</span>
<strong>Large rectangular channel</strong></p>
<p><span class="math display">\[
\begin{align}
a = &amp; K_S \sqrt{S} B_w  \\
u^2(a) = &amp; \left( \sqrt{S} B_w \right)^2 u^2(K_S) +
\left(\frac{K_S B_w}{2\sqrt{S}}  \right)^2 u^2(S)+
\left( K_S \sqrt{S} \right)^2 u^2(B_w)
\end{align}
\]</span></p>
<p><strong>Large parabolic channel</strong></p>
<p><span class="math display">\[
\begin{align}
a = &amp; K_S \left( \frac{2}{3}\right)^{5/3}  \sqrt{S} \frac{B_p}{\sqrt{H_p}} \\
u^2(a) = &amp; \left( \frac{2}{3}\right)^{10/3} \left[
\left( \sqrt{S} \frac{B_p}{\sqrt{H_p}}  \right)^2 u^2(K_S)+
\left( \frac{K_S B_p}{2 \sqrt{S} \sqrt{H_p}} \right)^2 u^2(S)+
\left(  \frac{K_S \sqrt{S}}{\sqrt{H_p}} \right)^2 u^2(B_p)+
\left(  \frac{K_S \sqrt{S} B_p}{2H_p^{3/2}} \right)^2 u^2(H_p) \right]
\end{align}
\]</span></p>
<p><strong>Triangular channel</strong></p>
<p><span class="math display">\[
\begin{align}
a = &amp; K_S \sqrt{S} \tan(\nu/2) \left( \frac{\sin(\nu/2)}{2} \right)^{2/3}  \\
u^2(a) = &amp; \left( \sqrt{S} \tan(\nu/2) \left( \frac{\sin(\nu/2)}{2} \right)^{2/3} \right)^2 u^2(K_S)+
\left( \frac{K_S \tan(\nu/2) \left( \frac{\sin(\nu/2)}{2} \right)^{2/3}}{2\sqrt{S}} \right)^2 u^2(S)+
\left( K_S \sqrt{S} \left( \frac{1}{2} \right)^{5/3} \sin^{2/3}(\nu/2) \left( \frac{1}{\cos^2(\nu/2)}+\frac{2}{3} \right) \right)^2 u^2(\nu)
\end{align}
\]</span></p>
</div>
<div id="approximation-of-actual-complex-controls" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Approximation of actual, complex controls</h2>
<p>Modelling real controls using idealised, standard controls usually requires to approximate the actual geometry by an equivalent, simple shape. For instance, estimating the prior parameters of rectangular section or channel controls requires finding the rectangle that would be the best approximation of the average shape of the natural riffle or channel (see Figure 9). Note the “average” controlling channel actually extends upstream and downstream of the station, so the geometry approximation should be done at the reach scale, based on representative cross-sections.</p>
<img src="equivalentRectangle.en.png" width="60%">
<p style="text-align: center;color: gray;">
Figure 9. Cross-section of the controlling channel and the principle of its modelling by an equivalent rectangle (green).
</p>
<p>The flow resistance parameter <span class="math inline">\(K_S\)</span> or <span class="math inline">\(n\)</span> of channel controls is often difficult to determine precisely. There exist look-up tables of typical values (e.g. <a href="Chow_en.xlsx">Chow’s table</a>) and calculation
methods that rely on a more detailed description of flow conditions (e.g. <a href="Cowan_en.xlsx">Cowan’s method</a>).</p>
<p>In channel controls equations, the friction slope is approximated by the longitudinal slope <span class="math inline">\(S\)</span> of the bed or of the water profile. The slope of the water profile in flood conditions is rarely known. By default, we use the average slope of the bed or the low flow water profile, which is easier to measure.</p>
</div>
<div id="remarks" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Remarks</h2>
<p>Priors reflect what the user knows about the configuration of the studied station, but also the
uncertainty of such knowledge. This is not about guessing the “right” results. The objective is to
determine “honest” priors, i.e. reasonable estimates of each parameter and its uncertainty.</p>
<p>For example, for a rectangular weir the spillway width will not receive the same uncertainty whether
it has been estimated by eye or with a topographic device.</p>
<p>This approach echoes the complex of the modeller, always seeking the perfect value. Modelled
phenomena are so complex that even the sharpest models, propped by the best algorithms ALWAYS
contain an element of uncertainty. The perfect value does not exist. There are only expected values;
we must approach it by giving our best but remain humble. Uncertainties on the physical values must
simply be representative of the reliability that is attributed to our estimation of these values. Some
examples are provided in the <a href="/en/doc/case">case study</a> section.</p>
</div>
</div>


                        </div>                        
                        
  <div class="container">
    
    

    
		
		    <a href="https://baratin-tools.github.io/en/doc/topics/hydraulic-analysis/">Hydraulic analysis</a> 
		

		
		    &nbsp; | &nbsp;
		
    
		
		   <strong> <a href="https://baratin-tools.github.io/en/doc/topics/hydraulic-controls/">Hydraulic controls</a> </strong> 

		

		
		    &nbsp; | &nbsp;
		
    
		
		    <a href="https://baratin-tools.github.io/en/doc/topics/rating-curve/">Rating curve equation</a> 
		

		
		    &nbsp; | &nbsp;
		
    
         
  
  </div>
    




                    </div>
                    

                    

                    

                    <div class="col-md-2">

                        
                    
                        
  <div class="container">
  	<h3> Sections </h3>
    
    
    
		
		    <a href="https://baratin-tools.github.io/en/doc/topics/hydraulic-analysis/">Hydraulic analysis</a> </br> </br>
		
    
		
		<div style="background-color:beige;">
		   <strong> <a href="https://baratin-tools.github.io/en/doc/topics/hydraulic-controls/">Hydraulic controls</a> </strong></br>
		</div>
		</br>
		
    
		
		    <a href="https://baratin-tools.github.io/en/doc/topics/rating-curve/">Rating curve equation</a> </br> </br>
		
    
         
  
  </div>
    





                        

                    </div>
                    

                    

                </div>
                

            </div>
            
            
            
        </div>
        

        <footer id="footer">
  <div class="container">
    
  
  </div>
    
</footer>




    </div>
    

    
<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>


<script src="/js/front.js"></script>



  </body>
</html>
